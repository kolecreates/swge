<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demo</title>
  </head>
  <body>
    <canvas
      id="canvas"
      width="800"
      height="600"
      style="border-width: 2px; border-style: solid; border-color: black"
    ></canvas>

    <script src="../src/draw.js"></script>
    <script>
      let canvas, ctx, camera, entities;
      function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        swge_draw_entities(ctx, camera, entities);
        requestAnimationFrame(loop);
      }

      window.onload = () => {
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");

        camera = {
          x: 0,
          y: 0,
          z: 1,
          fov_width: canvas.width / 2,
          fov_height: canvas.height / 2,
        };

        entities = [
          {
            x: 100,
            y: 100,
            z: 0.3,
            width: 100,
            height: 100,
            rotation_origin_x: 50,
            rotation_origin_y: 50,
            rotation_radians: Math.PI / 4,
            color: "green",
          },
          {
            x: 200,
            y: 200,
            z: 0,
            width: 100,
            height: 100,
            rotation_origin_x: 50,
            rotation_origin_y: 50,
            rotation_radians: Math.PI / 8,
            color: "blue",
          },
          {
            x: 0,
            y: 0,
            z: 0,
            width: 100,
            height: 100,
            rotation_origin_x: 50,
            rotation_origin_y: 50,
            rotation_radians: 0,
            color: "red",
          },
          {
            x: -50,
            y: -50,
            z: 0,
            width: 25,
            height: 25,
            rotation_origin_x: 50,
            rotation_origin_y: 50,
            rotation_radians: 0,
            color: "yellow",
          },
        ];

        window.addEventListener("keydown", (e) => {
          switch (e.key) {
            case "ArrowUp":
              camera.y -= 10;
              break;
            case "ArrowDown":
              camera.y += 10;
              break;
            case "ArrowLeft":
              camera.x -= 10;
              break;
            case "ArrowRight":
              camera.x += 10;
              break;
            case "0":
              camera.z += 0.1;
              break;
            case "9":
              camera.z -= 0.1;
              break;
          }
        });

        requestAnimationFrame(loop);
      };
    </script>
  </body>
</html>
